# Chapter 16. 네트워크

과목: 자바
공부: https://www.notion.so/a3daf5b202c84b6196cce3262e313af0
큰 계획: Java의 정석 (https://www.notion.so/Java-daa02338b92746dd988b36f70440202f?pvs=21)
계획 날짜: 2023년 12월 3일
yesterday: No

## 1. 네트워킹

네트워킹 : 두 대 이상의 컴퓨터를 케이블로 연결하여 네트워크를 구성하는 것.

[java.net](http://java.net) 패키지를 사용하여 네트워크 어플리케이션의 데이터 통신 부분을 쉽게 작성할 수 있음.

### 1.1 클라이언트/서버

- 서버 : 서비스를 제공하는 컴퓨터, 서버가 제공하는 서비스의 종료에 따라 파일서버, 메일서버 등이 있음.
- 클라이언트 : 서비스를 사용하는 컴퓨터

1대의 서버가 다수의 클라이언트에 여러 개의 서비스를 제공할 수도, 여러 대의 서버가 한개의 서비스를 제공할 수도 있음.

- 서버기반 모델 : 전용서버를 두고 네트워크를 구성한 것
    - 안정적인 서비스의 제공이 가능하고, 공유 데이터의 관리와 보안이 용이
    - 서버구축비용과 관리비용이 든다.
- P2P 모델 : FTP서버 프로그램이나 Tomcat과 같은 웹서버 프로그램을 설치하면 서버역할을 수행할 수 있기때문에 전용서버 없이 각 클라이언트가 서버역할을 동시에 수행하는 것
    - 서버구축 및 운용비용을 절감할 수 있고, 자원의 활용을 극대화할 수 있음.
    - 자원의 관리가 어렵고 보안이 취약함.

### 1.2 IP 주소

- 컴퓨터(호스트)를 구별하는데 사용되는 고유한 값으로 인터넷에 연결된 모든 컴퓨터는 IP 주소를 가진다.
- 4byte (32bit)의 정수로 구성되어있음.
- IP 주소 = 네트워크주소 + 호스트주소, 각각 몇 bit를 차지하는지는 네트워크 구성에 따라 달라짐.
    - 네트워크주소가 차지하는 자리수가 길어질 수록 호스트 주소의 범위가 줄어 네트워크 규모가 작아짐.
    - 호스트 수 = 2 ^ (호스트 주소의 bit수), 실제 네트워크에 포함 가능한 호스트 수 = 호스트 수 - 2
    - 호스트 주소 0 : 네트워크 자신, 255 : 브로드캐스트 주소

### 1.4 URL (Uniform Resource Location)

- URL : 인터넷에 존재하는 여러 서버들이 제공하는 자원에 접근할 수 있는 주소
- 프로토콜://호스트명:포트번호/경로명/파일명?쿼리스트링#참조

## 2. 소켓 프로그래밍

- 소켓 : 프로세스간의 통신에 사용되는 양쪽 끝단
- Java에서는 java.net패키지를 통해 소켓프로그래밍을 지원

### 2.1 TCP 와 UDP

- TCP/IP 프로토콜은 이기종 시스템간의 통신을 위한 표준 프로토콜로 프로토콜의 집합
    - TCP, UDP 모두 여기에 포함되어있음.
- 포트 : 호스트가 외부와 통신을 하기 위한 통로로 하나의 호스트가 0~65536의 포트를 가지고 있음.
    - 1032 이하의 포트는 FTP나 Telnet과 같은 기존의 다른 통신 프로그램들에 의해 사용됨.

### 2.2 TCP소켓프로그래밍

- 연결기반으로 연결 후 통신을 할 수 있음. 1:1 통신 방식
- 데이터의 경계를 구분하지 않음.(byte-stream)
- 신뢰성 있는 데이터 전송 (데이터의 전송 순서가 보장되고 수신여부를 확인하며 패킷을 관리할 필요가 없음.)
- UDP보다 전송속도가 느림.
- Socket, ServerSocket 클래스
- 프로세스
    1. 서버 프로그램에서는 서버소켓을 사용해서 서버 컴퓨터의 특정 포트에서 클라이언트의 연결요청을 처리 준비
    2. 클라이언트 프로그램은 접속할 서버의 IP주소와 포트 정보를 가지고 소켓을 생성해서 서버에 연결을 요청
    3. 서버소켓은 클라이언트의 연결요청을 받으며 서버에 새로운 소켓을 생성해서 클라이언트의 소켓과 연결
    4. 서버소켓과 관계없이 클라이언트 소켓과 새로 생성된 소켓 사이 일대일 통신 가능
- **서버소켓 (ServerSocket)**
    - 서버소켓은 포트와 결합되어 연결요청때마다 새로운 소켓을 생성하여 통신할 수 있도록 연결하고, 통신 자체에 관계 없음.
    - 한 포트에 하나의 ServerSocket만 연결할 수 있다. 단, 프로토콜이 다르면 같은 포트를 공유할 수 있음.
- **소켓 (Socket)**
    - 입출력스트림 (입력스트림, InputStream + 출력스트림, OutputStream) : 데이터를 주고받는 연결통로
    - A의 입력스트림이 B의 출력스트림과, A의 출력스트림이 B의 입력스트림과 연결된다.
    - 프로세스간의 통신을 담당, 이 두 스트림을 따라서 프로세스간의 통신 (입출력)이 이루어진다.
- ConnetException : 서버프로그램이 실행되고 있지 않거나 서버의 전원이 꺼져있어서 서버와 연결을 실패하면 발생

### 2.3 UDP소켓프로그래밍

- 비연결기반(ServerSocket이 필요없음.), 1:1, 1:n, n:n 통신방식이 가능.
- 데이터의 경계를 구분함. (datagram)
- 신뢰성 없는 데이터 전송 (데이터의 전송 순서가 바뀔 수 있고, 데이터의 수신 여부를 확인하지 않음. 패킷 관리 필요)
- TCP보다 전송속도가 빠름.
- DatagramSocket, DatagramPacket, MulticastSocket 클래스